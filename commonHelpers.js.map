{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst KEY = \"42562534-6abe2af4317b1372b4a8ab981\";\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nexport async function getImages(request, page){\n  let truthRequest = request;  \n  if(request.includes(\" \")){\n    truthRequest = request.split(\" \").join(\"+\");\n  }\n  return await axios.get(\"/?key=42562534-6abe2af4317b1372b4a8ab981&q=\"+truthRequest+\"&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=\"+page)\n}","export function addMarkup(date){\n\n    \n\n    return date.map(item => `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n            <img \n                class=\"gallery-image\" \n                src=\"${item.previewURL}\" \n                alt=\"${item.tags}\" \n                />\n        </a>\n    <ul class=\"statistic-list\">\n      <li class=\"statistic-item\">\n        <h3 class=\"statistic-title\">Likes</h3>\n        <p class=\"statistic-info\">${item.likes}</p>\n      </li>\n      <li class=\"statistic-item\">\n        <h3 class=\"statistic-title\">Views</h3>\n        <p class=\"statistic-info\">${item.views}</p>\n      </li>\n      <li class=\"statistic-item\">\n        <h3 class=\"statistic-title\">Comments</h3>\n        <p class=\"statistic-info\">${item.comments}</p>\n      </li>\n      <li class=\"statistic-item\">\n        <h3 class=\"statistic-title\">Downloads</h3>\n        <p class=\"statistic-info\">${item.downloads}</p>\n      </li>\n    </ul>\n  </li>`).join(\"\");\n}\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { getImages } from \"./js/pixabay-api\";\nimport { addMarkup } from \"./js/render-functions\";\n\nconst galleryForm = document.querySelector(\".gallery-form\");\nconst search = document.querySelector(\".gallery-search\")\nconst galleryList = document.querySelector(\".gallery\")\nconst loader = document.querySelector('.loader')\nconst moreBtn = document.querySelector('.btn-more')\nconst btnLoader = document.querySelector('.btn-loader')\nlet images;\nconst option = {\n    overlayOpacity: 0.8,\n    captionsData: 'alt',\n    captionDelay: 250,\n  };\n  const perPage = 15;\n  let page = 1;\n  let totalImage = 0;\n\nlet gallery = new SimpleLightbox('.gallery a', option);\n\ngalleryForm.addEventListener(\"submit\", event => {\n    event.preventDefault();\n    page = 1;\n    moreBtn.classList.add(\"is-hidden\")\n    if(search.value.trim() ===\"\"){\n        return;\n    }\n    galleryList.innerHTML = \"\";\n    loader.classList.remove(\"is-hidden\")\n    images = getImages(search.value.trim(), page);\n    console.log(images);\n    images.then(data => {\n        console.log(data)\n        if(!data.data.total){\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            })\n        }else{\n            totalImage = data.data.totalHits;\n            console.log(totalImage)\n            galleryList.insertAdjacentHTML(\"beforeend\", addMarkup(data.data.hits));\n            gallery.refresh();\n            moreBtn.classList.remove(\"is-hidden\")\n        }\n    }).catch(error => {\n        if(totalImage < (page) * perPage){\n            iziToast.error({\n                message: error,\n                position: 'topRight',\n            });\n        }\n        moreBtn.classList.add(\"is-hidden\")\n    }).finally(() => {\n        loader.classList.add(\"is-hidden\")\n    })\n})\n\nmoreBtn.addEventListener(\"click\", () => {\n    moreBtn.classList.add(\"is-hidden\")\n    btnLoader.classList.remove(\"is-hidden\")\n    page += 1;\n    images = getImages(search.value.trim(), page);\n    images\n      .then(data => {\n        galleryList.insertAdjacentHTML(\"beforeend\", addMarkup(data.data.hits));\n        window.scrollBy({\n            top: galleryList.firstElementChild.getBoundingClientRect().height*2,\n            left: 0,\n            behavior: \"smooth\",\n          });\n        gallery.refresh();\n    }).catch(error => {\n        if(totalImage < (page) * perPage){\n            iziToast.error({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n        }\n    }).finally(() => {\n        btnLoader.classList.add(\"is-hidden\")\n        if(totalImage < (page) * perPage){\n            moreBtn.classList.add(\"is-hidden\")\n        }else{\n            moreBtn.classList.remove(\"is-hidden\")\n        }\n    })\n})\n\n\n"],"names":["axios","getImages","request","page","truthRequest","addMarkup","date","item","galleryForm","search","galleryList","loader","moreBtn","btnLoader","images","option","perPage","totalImage","gallery","SimpleLightbox","event","data","iziToast","error"],"mappings":"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"}